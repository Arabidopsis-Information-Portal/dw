--
-- Copyright 2012 Carnegie Institution for Science. All rights reserved.
--
-- Generated by AndroMDA Poesys/DB cartridge: DO NOT EDIT DIRECTLY.
-- Template: SubsystemMySqlSchemaTables.vsl

-- SQL schema for community subsystem

CREATE TABLE CommunityKeyword (
  communityId BIGINT NOT NULL,  
  keyword VARCHAR(200) NOT NULL,  
  keywordType VARCHAR(30) NOT NULL,  
  CONSTRAINT CommunityKeywordPK PRIMARY KEY (communityId, keyword)
) ENGINE=InnoDB CHARSET=utf8;

CREATE TABLE Community (
  communityId BIGINT NOT NULL, -- generated by sequence  
  communityType VARCHAR(12) NOT NULL,  
  email VARCHAR(100),  
  memberStatus VARCHAR(20) NOT NULL,  
  countryId BIGINT NOT NULL,  
  CONSTRAINT CommunityPK PRIMARY KEY (communityId)
) ENGINE=InnoDB CHARSET=utf8;

CREATE TABLE CommunityAttribution (
  communityId BIGINT NOT NULL,  
  attributionType VARCHAR(100) NOT NULL,  
  name VARCHAR(100) NOT NULL,  
  tairObjectId BIGINT(12) NOT NULL,  
  attributionDate TIMESTAMP NOT NULL,  
  attributionComment VARCHAR(500),  
  CONSTRAINT CommunityAttributionPK PRIMARY KEY (attributionType, communityId, name, tairObjectId)
) ENGINE=InnoDB CHARSET=utf8;

CREATE TABLE Person (
  communityId BIGINT NOT NULL,  
  userName VARCHAR(30) NOT NULL,  
  firstName VARCHAR(30),  
  middleName VARCHAR(30),  
  lastName VARCHAR(30) NOT NULL,  
  suffix VARCHAR(10),  
  researchInterest VARCHAR(500),  
  CONSTRAINT PersonPK PRIMARY KEY (communityId)
) ENGINE=InnoDB CHARSET=utf8;

CREATE TABLE CommunityAlias (
  communityId BIGINT NOT NULL,  
  alias VARCHAR(100) NOT NULL,  
  CONSTRAINT CommunityAliasPK PRIMARY KEY (alias, communityId)
) ENGINE=InnoDB CHARSET=utf8;

CREATE TABLE Country (
  countryId BIGINT NOT NULL, -- generated by sequence  
  name VARCHAR(30) NOT NULL,  
  CONSTRAINT CountryPK PRIMARY KEY (countryId)
) ENGINE=InnoDB CHARSET=utf8;

CREATE TABLE CommunityReference (
  communityId BIGINT NOT NULL,  
  tairObjectId BIGINT(12) NOT NULL,  
  title VARCHAR(2000) NOT NULL,  
  source VARCHAR(300) NOT NULL,  
  publicationYear INT(4) NOT NULL,  
  CONSTRAINT CommunityReferencePK PRIMARY KEY (communityId, tairObjectId)
) ENGINE=InnoDB CHARSET=utf8;

CREATE TABLE Affiliation (
  organizationCommunityId BIGINT NOT NULL,  
  affiliateCommunityId BIGINT NOT NULL,  
  jobTitle VARCHAR(60),  
  pi BOOLEAN,  
  CONSTRAINT AffiliationPK PRIMARY KEY (organizationCommunityId, affiliateCommunityId)
) ENGINE=InnoDB CHARSET=utf8;

CREATE TABLE Organization (
  communityId BIGINT NOT NULL,  
  name VARCHAR(100) NOT NULL,  
  organizationType VARCHAR(30) NOT NULL,  
  description VARCHAR(500),  
  commercial BOOLEAN,  
  CONSTRAINT OrganizationPK PRIMARY KEY (communityId)
) ENGINE=InnoDB CHARSET=utf8;

