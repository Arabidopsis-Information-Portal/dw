--
-- Copyright 2012 Carnegie Institution for Science. All rights reserved.
--
-- Generated by AndroMDA Poesys/DB cartridge: DO NOT EDIT DIRECTLY.
-- Template: SubsystemOracleSchemaTables.vsl

-- Oracle SQL schema for community subsystem

CREATE TABLE CommunityKeyword (
  communityId NUMBER(38) NOT NULL,  
  keyword VARCHAR2(200) NOT NULL,  
  keywordType VARCHAR2(30) NOT NULL,  
  CONSTRAINT CommunityKeywordPK PRIMARY KEY (communityId, keyword)
);

CREATE TABLE Community (
  communityId NUMBER(38) NOT NULL, -- generated by sequence  
  communityType VARCHAR2(12) NOT NULL,  
  email VARCHAR2(100),  
  memberStatus VARCHAR2(20) NOT NULL,  
  countryId NUMBER(38) NOT NULL,  
  CONSTRAINT CommunityPK PRIMARY KEY (communityId)
);

CREATE TABLE CommunityAttribution (
  communityId NUMBER(38) NOT NULL,  
  attributionType VARCHAR2(100) NOT NULL,  
  name VARCHAR2(100) NOT NULL,  
  tairObjectId NUMBER(18)(12) NOT NULL,  
  attributionDate TIMESTAMP WITH TIME ZONE NOT NULL,  
  attributionComment VARCHAR2(500),  
  CONSTRAINT CommunityAttributionPK PRIMARY KEY (attributionType, communityId, name, tairObjectId)
);

CREATE TABLE Person (
  communityId NUMBER(38) NOT NULL,  
  userName VARCHAR2(30) NOT NULL,  
  firstName VARCHAR2(30),  
  middleName VARCHAR2(30),  
  lastName VARCHAR2(30) NOT NULL,  
  suffix VARCHAR2(10),  
  researchInterest VARCHAR2(500),  
  CONSTRAINT PersonPK PRIMARY KEY (communityId)
);

CREATE TABLE CommunityAlias (
  communityId NUMBER(38) NOT NULL,  
  alias VARCHAR2(100) NOT NULL,  
  CONSTRAINT CommunityAliasPK PRIMARY KEY (alias, communityId)
);

CREATE TABLE Country (
  countryId NUMBER(38) NOT NULL, -- generated by sequence  
  name VARCHAR2(30) NOT NULL,  
  CONSTRAINT CountryPK PRIMARY KEY (countryId)
);

CREATE TABLE CommunityReference (
  communityId NUMBER(38) NOT NULL,  
  tairObjectId NUMBER(18)(12) NOT NULL,  
  title VARCHAR2(2000) NOT NULL,  
  source VARCHAR2(300) NOT NULL,  
  publicationYear NUMBER(12)(4) NOT NULL,  
  CONSTRAINT CommunityReferencePK PRIMARY KEY (communityId, tairObjectId)
);

CREATE TABLE Affiliation (
  organizationCommunityId NUMBER(38) NOT NULL,  
  affiliateCommunityId NUMBER(38) NOT NULL,  
  jobTitle VARCHAR2(60),  
  pi NUMBER(1),  
  CONSTRAINT AffiliationPK PRIMARY KEY (organizationCommunityId, affiliateCommunityId)
);

CREATE TABLE Organization (
  communityId NUMBER(38) NOT NULL,  
  name VARCHAR2(100) NOT NULL,  
  organizationType VARCHAR2(30) NOT NULL,  
  description VARCHAR2(500),  
  commercial NUMBER(1),  
  CONSTRAINT OrganizationPK PRIMARY KEY (communityId)
);

